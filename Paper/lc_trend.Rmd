---
output: pdf_document
---

# Trend

Made popular in the organizational literature by @bliese_growth_2002 and @chan1998conceptualization, trend inferences represent a class of thinking where researchers create an index of time and relate it to their response variable. The first panel of Figure \ref{framework_figure} shows a box-and-arrow model heuristic where time is related to an outcome, $y$, and ultimately the analyst is interested in a variety of questions about trend and its correlates. Trend inferences have two components: trend itself and level. For clarity, we discuss them separately.

### Component 1 - Trend

Does affect, in general, go up or down across time, or is its trajectory relatively flat? Does trainee skill generally increase over the training session? These are questions about trend, and these first two are specifically about linear trend. It is also possible to explore how variables bend or curve across time. Do newcomer perceptions of climate increase and then plateau over time? Does the response time of a medical team decrease with each successive case but then remain stable once the team can no longer improve their coordination? These latter questions concern curvilinear trajectories. 

Trend has to do with the systematic direction or global shape of a trajectory across time. If we put a variable on the $y$-axis and plot its values against time on the $x$-axis, do the values tend to go up or down over time? It can be thought of as the coarse-grained direction of a trajectory. A positive trend indicates that, on average, we expect the variable to increase over time and a negative trend indicates that we expect the variable to decrease over time. Our first trend research question, therefore, concerns the shape of the trajectory.

>> **Research Question 1:** On average across units, is there a positive/negative/curvilinear trend?

Many research questions and inferences begin with the average pattern (or relationship) and then move to variability, the same applies here. After learning about the average trend across the sample researchers then focus on trend variability. How much consistency is there in the trend pattern? Do all trainees develop greater skill across time? Is there variability in the trend of helping behaviors, or counterproductive work behaviors over time? 

>> **Research Question 2:** Does trend differ across units?

Research questions one and two concern one variable, but they can also be iterated across all observed variables. For example, we might discover that -- on average -- affect and performance trends both decrease, but there is greater variability across units in the affect trend. Or we might learn that affect has a negative trend while performance has a positive trend.

Correlating these trends between-units is the next inference. Correlating indicates co-occuring patterns, where a large, positive, between-unit correlation between affect and performance trends would indicate that people with a positive affect trend (usually) have a positive performance trend and people with a negative affect trend (usually) have a negative performance trend. 

Figure \ref{trend_correlation} shows the inuition behind this inference with a set of graphs. In Panel A, we plot affect and performance across time for three individuals. Affect goes up while performance goes down for person one, this pattern is reversed for person two, and person three reports trendless affect and performance (i.e., zero trend). We use different colors to label the trends for each person. The affect and performance trends for person one are labeled with red lines, whereas person two has green lines and person three has blue lines.

Panel B then maps those pairings onto a scatterplot that demonstrates the between-unit relationship among affect and performance trends. For example, person one has a positive affect trend and a negative performance trend, so their value in Panel B goes on the bottom right, whereas person two has the opposite pattern and therefore is placed on the top left (where the performance trend is positive and the affect trend is negative). Producing this bottom scatter plot tells us that the between-unit association among affect and performance trends is negative. That is, people with a positive affect trend are expected to have a negative performance trend, people with a negative affect trend are expected to have a positive performance trend, and people with an affect trend of zero are expected to have a performance trend of zero. 

\begin{center}

------------

Insert Figure \ref{trend_correlation} about here

------------

\end{center}

>> **Research Question 3:** What is the between-unit trend correlation?

The final trend inference is about identifying covariates or predictors of trend. Does gender predict depletion trends? Does the trend in unit climate covary with between-unit differences in leader quality?

Figure \ref{trend_covariate} demonstrates the inference in a plot. We graph affect across time for six employees, and these employees differ by job type. The first three individuals work in research and development, whereas the final three work in sales. Affect trajectories tend to decrease over time for employees in research and development, whereas affect trajectories tend to increase for those in sales. An individual's job type, then, gives us a clue to their likely affect trend -- said formally, job type covaries with affect trend, such that we expect individuals in sales to have positive affect trends and individuals in research and development to have negative affect trends. The expected trends are plotted as the thick blue lines. 


\begin{center}

------------

Insert Figure \ref{trend_covariate} about here

------------

\end{center}


>> **Research Question 4:** What is the betweeen-unit correlation among trend and a covariate?

Note the difference between research questions three and four. Both are between unit, but three is about co-occuring trend patterns whereas inference four is about the relationship between trend and a covariate/predictor. With respect to our examples, inference three says, on average, if an individual has a positive affect trend then we expect her to have a negative performance trend. Inference four says, on average, if an individual is in research and development then we expect him to have a negative affect trend. 

### Component 2 - Level

Researchers that explore trend also assess its predicted value at a given time $t$, and this second component is called level. Level is almost always evaluated at the first or last observed time point -- e.g., What is the predicted level of the trainee skill trend at the beginning of a training session? On average, what is the expected level of the unit climate trend at the end of a two-week socialization process? -- although researchers are free to asssess level at any $t$. 

>> **Research Question 5:** On average across units, what is the expected level of the $y$ trend at time $t$?

After exploring the average trend level at a certain time we then move to its variability. Trend lines have a beginning (or end) point, how consistent do we expect that point to be across the sample? Is there variability in affect trend starting level? Are there large between-unit differences in the expected level of the performance trend at the last time point?

>> **Research Question 6:** Is there variability across units in the expected level of the $y$ trend at time $t$?

It is also possible to assess between unit correlations among level and (a) trend in the same variable or (b) level or (c) trend in a different variable. First, consider a relationship among level and trend in the same variable. On average, do people with low initial skill show positive skill trends whereas people with high initial skill show negative skill trends? Do organizations with high initial CWBs, on average, tend to have negative CWB trends?

>> **Research Question 7:** What is the between-unit correlation between trend and level in $y$? 

Second, consider a between-unit correlation between level in one variable and level in another. On average, do people with a low initial performance also have low initial depletion (based on the initial levels predicted by the performance and depletion trends)? Are organizations with high initial turnover also expected, on average, to have high burnout (based on the initial levels predicted by the turnover and burnout trends)?

>> **Research Question 8:** What is the between-unit correlation between level of the $x$ trend and level of the $y$ trend at $t$?

Finally, researchers are free to mix the inferences above and assess whether levels in one variable covary with trend in another. Are people with high initial voice (predicted by the voice trend) expected to have negative satisfaction trends?

>> **Research Question 9:** What is the between-unit correlation between the level of the $x$ trend at time $t$ and the trend in $y$?

A note on phrasing. The inferences we explored in this section have to do with correlating levels and trends, where a statement like "affect and performance trends covary between-units, such that people with a negative affect trend have a positive performance trend" is appropriate. There is a less precise phrase that is easy to fall into -- and we have seen it used in our literature. Sometimes, researchers will correlate trends and then state, "when affect decreases performance goes up." We urge researchers to avoid this second statement because it is not clear if it refers to a static relationship about trends or a dynamic statement about how trajectories move across time. That is, the phrase "when affect decreases performance goes up" could refer to between-unit correlated trends, but it could also mean something like, "when affect decreases performance immediately or subsequently goes up." This second statement is far different and it should not be used when an analysis only correlates trends or evokes predictors of trend. Again, we urge researchers to phrase their inferences as we have shown here.

## Statistical Models

Trend is called the slope in the statistical modeling literature. That is, when a researcher estimates a model to explore whether a variable goes up or down over time she is estimating the trend coefficient. The mean estimate refers to trend itself, whereas the variance estimate refers to the trend variability across units. In the statistical modeling literature these models are called growth-models or growth-curves. Keep in mind, however, that researchers use the word "change" informally to mean growth as well, so when you read a theoretical discussion you may see words like "change" and "increase" despite the researcher using a "growth" statistical model. 

Broad theoretical discussions of growth are in @pitariu_explaining_2010 and @ployhart_longitudinal_2010 (keep in mind that they call growth "change"), whereas @bliese_growth_2002 describe actual growth-curve analysis. Growth curves are a core topic in developmental psychology, so there are many great articles and textbooks to read from their field. See @grimm_growth_2016 and @singer_applied_2003 for two great textbooks on growth curve modeling, and @mcardle_latent_1987 for an empirical discussion. Two straight-forward empirical examples in our own field are in @dunford_is_2012 and @hulsheger_dawn_2016. 

```{r, echo = F, eval = F}
library(xtable)
library(knitr)
library(kableExtra)
library(tidyverse)

inference_text2 <- c('There is positive/negative/curvilinear trend in a variable across time.?',
                    'There is variability in the trend of a variable across time. Trend differs across units.',
                    'There are correlated trends. There is a relationship between two trends.',
                    'There are correlates/predictors of trend.')
trend_table <- data.frame(
  Inference = c(1, 2, 3, 4),
  Examples = c(linebreak('Burnout decreases over time.\nPerformance increases over time.'),
                 linebreak('Affect trends differ across people (units).\nThere is variability in turnover trends across organizations.'),
                 linebreak('People with a positive health status trend have a positive happiness trend.\nPeople with a positive performance trend have a negative anxiety trend.'),
                 linebreak('Gender correlates with depletion trends.\nUnit climate covaries with unit performance trends.'))
)

trend_table %>%
  kable('latex', booktabs = T, escape = F, align = 'l', caption = '\\label{trend_table}Examples of trend inferences.') %>%
    column_spec(1, width = '5em') %>%
    column_spec(2, width = '30em') %>%
  row_spec(1:3, hline_after = T)


```



```{r, echo = F, eval = F, fig.cap = 'Trend across time.\\label{trend}'}
set.seed(3)

ind <- c(1:20)
chris <- 4 + 0.7*ind + rnorm(20,0,0.5)
josh <- 4 - 0.7*ind  + rnorm(20, 0, 0.5)
chris[1] <- 4
josh[1] <- 4
#timothy <- c(4, 5, 15, 18, 21, 20, 19, 17, -6, -10, -12, -16, -14, 0, 1,2,3,4,5,9)
timothy <- 15*sin(ind/3)

fam <- data.frame(
  'Time' = c(ind, ind, ind),
  'Y' = c(chris, josh, timothy),
  'legend' = c(rep('Positive Trend', 20), rep('Negative Trend', 20), rep('Curvilinear Trend', 20))
)

hm <- data.frame(
  'Time' = c(ind),
  'Y' = c(timothy)
)

library(ggplot2)
ggplot(fam, aes(x = Time, y = Y, color = legend)) + 
  geom_point(alpha = 0.6) + 
  geom_abline(intercept = 4, slope = 0.7, color = 'blue', alpha = 0.5) +
  geom_abline(intercept = 4, slope = -0.7, color = 'red', alpha = 0.5) + 
  scale_y_continuous(labels = NULL) + 
  theme_classic() + 
  theme(legend.title = element_blank()) + 
  scale_color_manual(values = c('Positive Trend' = 'blue', 
                                'Negative Trend' = 'red',
                                'Curvilinear Trend' = 'green'),
                     breaks = c('Positive Trend', 
                                'Negative Trend',
                                'Curvilinear Trend')) + 
  geom_smooth(data = hm, aes(x = Time, y = Y), se = F, color = 'green', alpha = 0.6, size = 0.5, alpha = 0.2)


```

```{r, echo = F, eval = F, fig.cap = 'Differences in trend variability across units.\\label{trend_var}'}
set.seed(88)

per1 <- 4 + 0.6*ind + rnorm(20, 0, 0.5)
per2 <- 4 + 0.6*ind + rnorm(20, 0, 2)
per3 <- 4 + 0.6*ind + rnorm(20, 0, 0.5)

per4 <- 4 + 0.6*ind + rnorm(20, 0, 1)
per5 <- 4 - 0.9*ind + rnorm(20, 0, 1)
per6 <- 4 + 0.01*ind + rnorm(20,0,1)


yup <- data.frame(
  'Time' = c(ind, ind, ind, ind, ind, ind),
  'Y' = c(per1, per2, per3, per4, per5, per6),
  'Person' = c(rep('Person 1', 20),
               rep("Person 2", 20),
               rep('Person 3', 20),
               rep('Person 1', 20),
               rep('Person 2', 20),
               rep('Person 3', 20)),
  'type' = c(rep('No Trend Variability', 60),
             rep('Trend Variability', 60))
)


ggplot(yup, aes(x = Time, y = Y, color = Person)) + 
  geom_point(alpha = 0.6) + 
  geom_smooth(method = 'lm', se = F, aes(color = Person), size = 0.5, alpha = 0.6) + 
  facet_wrap(~type) + 
  theme_classic() + 
  theme(legend.title = element_blank()) + 
  scale_y_continuous(labels = NULL) + 
  scale_color_manual(values = c('Person 1' = 'red',
                                'Person 2' = 'green',
                                'Person 3' = 'blue')
                     )



```


```{r, echo = F, fig.cap = 'Between-unit correlation of trend in affect and performance.\\label{trend_correlation}', fig.height = 10}
ind <- c(1:20)
set.seed(33)
tre_affect <- 6 + 0.6*ind + rnorm(20,0,1)
tre_perf <- 2 - 0.6*ind + rnorm(20,0,1)

affect2 <- 6- 0.6*ind + rnorm(20,0,1)
perf2 <- 2 + 0.6*ind + rnorm(20,0,1)

affect3 <- 5 + 0.02*ind + rnorm(20,0,1)
perf3 <- 5 + 0.01*ind + rnorm(20,0,1)

trend_rel <- data.frame(
  'Time' = c(ind, ind,
             ind, ind,
             ind, ind),
  'Value' = c(tre_affect, tre_perf,
          affect2, perf2,
          affect3, perf3),
  'call' = c(rep('Affect', 20),
              rep('Performance', 20),
             rep('Affect', 20),
             rep('Performance', 20),
             rep('Affect', 20),
             rep('Performance', 20)),
  'Person' = c(rep('Person 1', 40),
               rep('Person 2', 40),
               rep('Person 3', 40))
)

trend_lines <- data.frame(
  'Person' = c('Person 1',
          'Person 1',
          'Person 2',
          'Person 2',
          'Person 3',
          'Person 3'),
  'call' = c('Affect',
             'Performance',
             'Affect', 
             'Performance',
             'Affect',
             'Performance'),
  'intercept' = c(6, 2,
                  6, 2, 
                  5, 5),
  'slope' = c(0.6, -0.6,
              -0.6, 0.6,
              0.02, 0.01)
)
library(ggplot2)
tp1 <- ggplot(trend_rel, aes(x = Time, y = Value, group = call)) + 
  geom_line(aes(linetype = call)) + 
  theme_classic() + 
  scale_y_continuous(labels = NULL) + 
  theme(legend.title = element_blank()) + 
  facet_grid(~Person, scales = 'free', space = 'free') + 
  geom_abline(aes(intercept = intercept, slope = slope, color = Person), data = trend_lines, alpha = 0.9, show.legend = F) + 
  scale_color_manual(values = c('Person 1' = 'red',
                                'Person 2' = 'green',
                                'Person 3' = 'blue')) + 
  ggtitle('Panel A')
  



trend_trend <- data.frame(
  'Affect' = c(-0.8, 0, 0.8),
  'Performance' = c(0.8, 0, -0.8),
  'label' = c('green', 'blue', 'red')
)

tp2 <- ggplot(trend_trend, aes(x = Affect, y = Performance, color = label)) + 
  geom_point(size = 6, alpha = 0.6) + 
  theme_classic() + 
  scale_y_continuous(breaks = c(-1, 0, 1)) + 
  scale_x_continuous(breaks = c(-1, 0, 1)) + 
  ylab("Trend in Performance") + 
  xlab("Trend in Affect") + 
  ggtitle('Panel B') + 
  theme(legend.title = element_blank()) + 
  scale_color_manual(values = c('red' = 'red', 
                                'blue' = 'blue',
                                'green' = 'green'),
                     labels = c('Person 3',
                                'Person 2',
                                'Person 1'))
                     #breaks = c('Person 1',
                          #      'Person 2',
                           #     'Person 3'))

library(gridExtra)

grid.arrange(tp1, tp2, ncol = 1)

```

```{r, echo = F, fig.cap = 'Job type as a covariate of affect trend.\\label{trend_covariate}'}

library(ggplot2)
library(tidyverse)

xs <- c(1:20)

person1 <- 4 + 0.5*xs + rnorm(20,0,1)
person2 <- 4 + 0.6*xs + rnorm(20,0,1)
person3 <- 4 + 0.36*xs + rnorm(20,0,1)

person4 <- 4 - 0.5*xs + rnorm(20,0,1)
person5 <- 4 - 0.45*xs + rnorm(20,0,1)
person6 <- 4 - 0.68*xs + rnorm(20, 0, 1)


covary_trend_df <- data.frame(
  'id' = c(rep('Person 6',20), rep('Person 5',20), rep('Person 4',20),
           rep('Person 3',20), rep('Person 2',20), rep('Person 1',20)),
  'affect' = c(person1, person2, person3,
               person4, person5, person6),
  'time' = c(xs, xs, xs,
             xs, xs, xs),
  'job_type' = c(rep('Sales', 60),
                 rep('Research and Development', 60))
  
)

trend_df <- data.frame(
  'id' = c('Person 6',
           'Person 5',
           'Person 4',
           'Person 3',
           'Person 2',
           'Person 1'),
  'intercept' = c(rep(4, 6)),
  'slope' = c(rep(0.45, 3),
              rep(-0.52, 3)),
  'job_type' = c(rep('Sales', 3),
                 rep('Research and Development', 3))
)

ggplot(covary_trend_df, aes(x = time, y = affect, linetype = id)) + 
  geom_point() + 
  geom_line() + 
  theme_classic() +
  theme(legend.title = element_blank()) + 
  ylab('Affect') + 
  xlab('Time') + 
  scale_y_continuous(labels = NULL) + 
  facet_wrap(~job_type) + 
  geom_abline(data = trend_df, aes(intercept = intercept, slope = slope, color = id), alpha = 0.2, show.legend = F, size = 4) + 
  scale_color_manual(values = c('Person 1' = 'blue',
                                'Person 2' = 'blue',
                                'Person 3' = 'blue',
                                'Person 4' = 'blue',
                                'Person 5' = 'blue',
                                'Person 6' = 'blue'))
  



```



